const input1 = {
  type: `static`,
  data: [ 0.5994552698893447, 0.599064102235953, 0.35056786746718865, 0.3500060860690234, 0.35006407702387293, 0.348183724532739, 0.34884531979873606, 0.3486988612628478, 0.34931567039775985, 0.34805662901760775, 0.3481243268170159, 0.3471440943038979, 0.6020748067125484, 0.6769818442172816, 0.7008137276381164, 0.6955130145952071, 0.7124507056473198, 0.7551564794988055, 0.7765847728531536, 0.7846291132571114, 0.7884075745985573, 0.7852740709839631, 0.7543214236572517, 0.6024584250828178, 0.7590348350325902, 0.7572549057733584, 0.7596238711119784, 0.7721559770151246, 0.77332122847765, 0.7573920874950738, 0.7227731072697046, 0.691824052059341, 0.6822957972272966, 0.6912616443915275, 0.3516963993610157, 0.351695987552907, 0.3518557352996475, 0.3520544302094652, 0.35224975625138116, 0.3509199853750202, ],
}

const input2 = {
  type: `normal`,
  data: [ 0.517961401614517, 0.51795945498385, 0.6929285967393342, 0.9373905920795014, 0.9375701063261677, 0.9420131246311026, 0.9487265573379107, 0.9532314497279086, 0.9597637392480829, 0.9649454381997624, 0.9704170111389493, 0.9718801723262454, 0.6917187162345894, 0.9818833162338804, 0.9741279207714674, 0.9670750470117099, 0.9599887901764863, 0.9561961601786073, 0.9536156078278396, 0.9452474558161617, 0.688486550137538, 0.6862855395278077, 0.6889790445720432, 0.694185102717786, 0.6867004000221388, 0.6868382370682793, 0.6831432022067203, 0.6891155012641412, 0.6869661722140721, 0.5132680138805535, 0.5142630591661521, 0.516669869117694, 0.5173126309844173, 0.5174420168168854, 0.6924266476834146, 0.6907055301574426, 0.6898531403697211, 0.6903550007422555, 0.6920621237445368, 0.692583999037324, ],
}

const input3 = {
  type: `normal`,
  data: [ 0.7970336811789516, 0.7966955394497373, 0.6257892724474822, 0.6247660391979712, 0.6234494434206667, 0.4682748522565705, 0.47091479359573996, 0.47044409730804676, 0.4704123052809353, 0.46752838354686765, 0.46869666807729965, 0.4901419089485066, 0.7980105439577683, 0.4893614240849455, 0.48789638545527675, 0.4871492807479713, 0.4932491342948191, 0.4953005335043164, 0.49582755292586184, 0.4958078096957378, 0.8540240974479486, 0.87166426135269, 0.8678114318663785, 0.8003519330625414, 0.867899027195929, 0.878471901293726, 0.9193898053305759, 0.8943135493378668, 0.8794363885738545, 0.8612880500579801, 0.4747123659891098, 0.4818097376176827, 0.48014801519439265, 0.4848022520366683, 0.8021564106184855, 0.6212976613190518, 0.6221856125132545, 0.6234567691600998, 0.6246916908044958, 0.624051454171958, ],
}

const input4 = {
  type: `static`,
  data: [ 0.6356052633609023, 0.6370200307873028, 0.6452912006468637, 0.6428166483565648, 0.6457104936505018, 0.930252374909148, 0.9355593709182481, 0.940417546358631, 0.938981387624808, 0.9361740873541464, 0.9353159703961992, 0.9405327709652588, 0.63826517444716, 0.9497610650942159, 0.9572042326113551, 0.9639666725017165, 0.968710774545617, 0.9716869304628997, 0.9761220611617342, 0.9739107681934567, 0.9705402982981287, 0.9682353946996541, 0.9665428828389981, 0.6409564786152606, 0.9690854891716492, 0.9778149048007924, 0.979645866968401, 0.9768414527768374, 0.977739504802136, 0.9776863156008326, 0.9795600471100725, 0.9806730668760013, 0.9804818997244141, 0.9775748512202764, 0.6438105874293297, 0.6444931466972921, 0.6434197738422119, 0.6390064865979158, 0.6443945465544884, 0.64497963317503,],
}

function checkStaticScene(input) {

  console.log(`input.type:`, input.type)
  
  let highestScore = input.data.reduce((max, cur) => cur > max ? cur : max, 0)
  let lowestScore = input.data.reduce((min, cur) => cur < min ? cur : min, 0)
  
  let deltas = []
  for (const i in input.data) {
    if (i > 0) {
      deltas.push(Math.abs(input.data[i] - input.data[i-1]))
    }
  }

  let validScores = []
  for (const score of input.data) {
    if ((score - lowestScore) > (highestScore - lowestScore) * 0.8) {
      validScores.push(score)
    }
  }


  deltas = deltas.sort((a, b) => a - b)
  let mean = deltas.reduce((sum, cur) => sum + cur, 0)/deltas.length
  let median = deltas.length%2 === 0 ? (deltas[deltas.length/2] + deltas[deltas.length/2+1])/2 : deltas[Math.floor(deltas.length/2)+1]

  console.log(`mean:`, mean)
  console.log(`median:`, median)
  console.log(`validScores.length:`, validScores.length)
  
  if (validScores.length >= 0.5 * input.data.length) {
    console.warn(`Static scene detected!`)
    return true
  }

  return false
  
}
module.exports.checkStaticScene = checkStaticScene

// checkStaticScene(input1)
// checkStaticScene(input2)
// checkStaticScene(input3)
// checkStaticScene(input4)